version: '3.4'

services:
  locationdb:
    container_name: locationdb
    restart: always
    ports:
      - "6378:6379"

  locationsql:
    container_name: locationsql
    environment:
      SA_PASSWORD: Admin1234!
      ACCEPT_EULA: Y
      UserID: "sa"
    ports:
      - "1432:1433"

  locationapi:
    container_name: locationapi
    environment:
      - ASPNETCORE_ENVIRONMENT=Development
      - "Redis=locationdb:6379"
      - "ConnectionString:Data Source=localhost\\locationsql,1432;Initial Catalog=LocationnAPI;User ID=sa;Password=Admin1234!;TrustServerCertificate=true;"
    depends_on:
    - locationdb
    - locationsql
    ports:
      - "7000:80"